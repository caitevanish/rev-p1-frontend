<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Complaint Helper</title>
    <!-- All CSS Links -->
    <!-- Bootstrap CSS -->
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap@4.3.1/dist/css/bootstrap.min.css"
      integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T"
      crossorigin="anonymous"
    />
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js"></script>

    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/js/bootstrap.min.js"
      integrity="sha384-Atwg2Pkwv9vp0ygtn1JAojH0nYbwNJLPhwyoVbhoPwBhjQPR5VtM2+xf0Uwh9KtT"
      crossorigin="anonymous"
    ></script>

    <!-- My CSS -->
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body>
    <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
      <div class="container-fluid">
        <a class="navbar-brand" href="/home.html">Townhall</a>
        <button
          class="navbar-toggler"
          type="button"
          data-bs-toggle="collapse"
          data-bs-target="#navbarNav"
          aria-controls="navbarNav"
          aria-expanded="false"
          aria-label="Toggle navigation"
        >
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarNav">
          <ul class="navbar-nav">
            <li class="nav-item">
              <a
                class="nav-link active"
                aria-current="page"
                href="/helper-meeting-page.html"
                >Create Meeting</a
              >
            </li>
            <li class="nav-item">
              <a
                class="nav-link active"
                aria-current="page"
                href="/helper-complaint-page.html"
                >Create Complaint</a
              >
            </li>
            <li class="nav-item">
              <a class="nav-link active" aria-current="page" href="/login.html"
                >Sign Out</a
              >
            </li>
          </ul>
        </div>
      </div>
    </nav>

    <div class="container tempPadding">
      <h2>Complaint Test Page</h2>
      <div class="outerComplaintBox">
        <div class="">
          <div class="col-md-8 text-center tempBorder innerComplaintBox">
            <form action="" method="post">
              <fieldset>
                <legend>Write your complaint here:</legend>
                <textarea
                  name="description"
                  id="complaintInput"
                  class="form-control"
                  placeholder="So this thing happened recently..."
                  cols="50"
                  rows="5"
                  required="required"
                ></textarea>
              </fieldset>

              <button id="submitComplaintBtn" class="btn btn-primary" type="click">Submit</button>
            </form>
          </div>
        </div>
      </div>
    </div>
    <hr class="dotted">
    <!-- Update Complaint -->
    <div class="container tempBorder">
      <div class="outerComplaintBox">
        <h3>Update Complaint</h3>
        <div class="col-md-8 text-center tempBorder innerComplaintBox">

          <div class="mb-3">
            <div>
              <label for="complaintId" class="form-label">Choose Complaint Id:</label>
              <input type="text" class="form-control" id="complaintIdInput" aria-describedby="complaintId">
            </div>            
              <button id="getcomplaintId" class="btn btn-primary" type="click">Get It</button>
          </div>
        </div>  


        <div class="col-md-10 text-center tempBorder innerComplaintBox">

          <form action="" method="put"> <div>
            <legend>Complaint Details</legend>
            <div class="input-group mb-3">
              <span class="input-group-text">Id:</span>
              <input id="dbId" type="text" class="form-control" aria-label="" disabled  value="">
            </div>
  
            
            <div class="input-group mb-3">
              <span class="input-group-text">Description:</span>
              <input id="dbDescription" type="text" class="form-control" aria-label="" disabled  value="">
              
            </div>
  
            <div class="input-group mb-3">
              <span class="input-group-text">Status:</span>
              <input id="dbStatus" type="text" class="form-control" aria-label=""  placeholder="PENDING, APPROVED, DENIED" value="">
            </div>
              
            <div class="input-group mb-3">
              <span class="input-group-text">priority:</span>
              <input id="dbPriority" type="text" class="form-control" aria-label="" placeholder="TBD, HIGH, LOW" value="">
            </div>
              
            <div class="input-group mb-3">
              <span class="input-group-text">Meeting Id:</span>
              <input id="dbMeetingId" type="text" class="form-control" aria-label=""  value="">
            </div>
  
              <button id="updateComplaintBtn" class="btn btn-primary" type="click">Submit</button>
            
            
  
  
          </form>
        </div>  
          
        </div>
        </div>

      </div>


    </div>
     
  <!-- Bootstrap Scripts -->
  <script
    src="https://code.jquery.com/jquery-3.3.1.slim.min.js"
    integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo"
    crossorigin="anonymous"
  ></script>
  <script
    src="https://cdn.jsdelivr.net/npm/popper.js@1.14.7/dist/umd/popper.min.js"
    integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1"
    crossorigin="anonymous"
  ></script>
  <script
    src="https://cdn.jsdelivr.net/npm/bootstrap@4.3.1/dist/js/bootstrap.min.js"
    integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM"
    crossorigin="anonymous"
  ></script>
  <script>
      //===========================
      //-----Submit a Claim:
      //===========================

      //-----Variables:
      const complaintTextInput = document.getElementById('complaintInput');
      const submitComplaintBtn = document.getElementById('submitComplaintBtn');

      //-----Submit complaint button:
      submitComplaintBtn.addEventListener('click', async (event) => {
      event.preventDefault();

      const description = complaintTextInput.value;
      const newComplaint = {
        id: 0,
        description,
        status: 'PENDING',
        priority: 'TBD',
        m_id: -1,
      };

      const httpResponse = await fetch('http://localhost:8080/complaints', {
      method: 'POST',
      body: JSON.stringify(newComplaint),
      headers: {
        'Content-Type': 'application/json',
      },
    });

    if (httpResponse.status == 201) {
      alert(
        'Your Complaint has been sent. A council person will review your complaint soon. Please check back in with the upcoming meetings to see if your complaint will be brought up at a future meeting. Thank you.'
      );
      complaintTextInput.value = '';

    // option 1: switch back to home page
      window.location = './home.html';

    //option 2: original plan
      // clearComplaintsTable();
      // renderComplaintsTable();

    } else {
      alert('Something went Wrong');
    }

  });
  </script>
<script>
  //===========================
  //-----update Claim:
  //===========================

  //-----Variables:
  const complaintIdInput = document.getElementById('complaintIdInput');
  const getComplaintBtn = document.getElementById('getcomplaintId')

  //-----Submit complaint button:
  getComplaintBtn.addEventListener('click', (event)=>{
    console.log("in the get meeting button");
    const id = complaintIdInput.value;
    console.log(id);

    // const httpResonse = await fetch('http://localhost:8080/complaints/${id}/${}')

  })


  //-----get complaints:
  
  
  //-----render complaint:


</script>
<!-- <script src="createNewComplaint.js"></script> -->
<!-- <script src="renderComplaintsTable.js"></script> -->
  
</html>
