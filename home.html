<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, shrink-to-fit=no"
    />
    <title>Townhall Grievances</title>
    <link rel="stylesheet" href="normalize.css" />
    <!-- All CSS Links -->
    <!-- Bootstrap CSS -->
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap@4.3.1/dist/css/bootstrap.min.css"
      integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T"
      crossorigin="anonymous"
    />
    <!-- My CSS -->
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body>
    <nav>Home</nav>
    <div id="welcomeBanner">
      <h1>Hello {First name here}!</h1>
      <div id="complaintBox">
        <h2>Report a complaint</h2>
        <p>Is there something on your mind?</p>
        <button id="complaintBtn">Tell us about it</button>
      </div>
      <div id="main">
        <div>
          <h3>Upcoming Meetings</h3>
          <div id="meetingTable">
            <table class="table">
              <thead>
                <tr>
                  <th scope="col">#</th>
                  <th scope="col">Time</th>
                  <th scope="col">Location</th>
                  <th scope="col">Summary</th>
                  <th scope="col"></th>
                </tr>
              </thead>
              <tbody id="meetingTable">
                <!-- <tr>
                  <th scope="row">101</th>
                  <td>1660675993</td>
                  <td>The Hogshead, Hogsmead</td>
                  <td>Discussing the annoyances of nomaj neighbors</td>
                  <td>
                    <button id="meetingDetailsBtn">Details</button>
                  </td>
                </tr> -->
              </tbody>
            </table>
          </div>
        </div>
      </div>
    </div>
    <div id="main"></div>

    <!-- -----------bootstrap Scripts Here----------- -->
    <script
      src="https://code.jquery.com/jquery-3.3.1.slim.min.js"
      integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo"
      crossorigin="anonymous"
    ></script>
    <script
      src="https://cdn.jsdelivr.net/npm/popper.js@1.14.7/dist/umd/popper.min.js"
      integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1"
      crossorigin="anonymous"
    ></script>
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@4.3.1/dist/js/bootstrap.min.js"
      integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM"
      crossorigin="anonymous"
    ></script>
    <script>
      // -----Main variables-----

      const welcomeBanner = document.getElementById('welcomeBanner'); //Says user's name
      const complaintBtn = document.getElementById('complaintBtn'); //opens complaint modal

      // ----- Meetings Table Async Functions -----

      const meetingTableBody = document.getElementById('meetingTable'); //shows upcoming meetings
      const meetingDetailsBtn = document.getElementById('meetingDetailsBtn'); //Get meeting by id, open in a modal

      async function getAllMeetings() {
        const httpResponse = await fetch(' '); //url for the meetings table here
        const meetings = await httpResponse.json();
        return meetings;
      }

      async function renderMeetingTable() {
        const meetingList = await getAllMeetings();

        for (const meeting of meetingList) {
          const meetingRow = document.createElement('tr'); //making the row

          const meetingIdData = document.createElement('th');
          meetingIdData.innerText = meeting.meet_id;

          const meetingTimeData = document.createElement('td');
          meetingTimeData.innerText = meeting.time;

          const meetingLocationData = document.createElement('td');
          meetingLocationData.innerText = meeting.location;

          const meetingSummaryData = document.createElement('td');
          meetingSummaryData.innerText = meeting.summary;

          meetingRow.appendChild(meetingIdData);
          meetingRow.appendChild(meetingTimeData);
          meetingRow.appendChild(meetingLocationData);
          meetingRow.appendChild(meetingSummaryData);
          meetingTableBody.appendChild(meetingRow);
        }
      }
      renderMeetingTable();
    </script>
  </body>
</html>
